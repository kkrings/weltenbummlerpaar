<div *ngIf="inputImage" class="mb-2">
  <img class="img img-fluid"
       src="http://localhost:3000/images/{{inputImage._id}}.jpg"
       alt="{{inputImage._id}}.jpg">
</div>
<form [formGroup]="imageForm" (ngSubmit)="onSubmit()">
  <div class="custom-file mb-2">
    <input id="image"
           class="custom-file-input"
           type="file"
           accept="image/jpeg"
           [required]="(inputImage === undefined) ? 'required' : null"
           (change)="imageFile.setValue($event.target.files[0])">
    <label for="image" class="custom-file-label">
      Wähle ein Foto aus
    </label>
  </div>
  <div class="form-group">
    <label for="description" class="sr-only">Beschreibung</label>
    <input formControlName="description"
           id="description"
           class="form-control"
           type="text"
           placeholder="Beschreibung"
           required>
    <div *ngIf="isInvalid(description)">
      <div *ngIf="description.errors && description.errors.required">
        <small class="text-danger">Ohne Beschreibung kein Fotoupload.</small>
      </div>
    </div>
  </div>
  <button type="submit"
          class="btn btn-primary"
          [hidden]="showUploadSpinner"
          [disabled]="imageForm.invalid || showDeleteSpinner">
    Foto {{(inputImage === undefined) ? 'hinzufügen' : 'bearbeiten'}}
  </button>
  <div *ngIf="showUploadSpinner" class="spinner-border text-primary">
    <span class="sr-only">Foto wird hinzugefügt/bearbeitet ...</span>
  </div>
  <button *ngIf="inputImage"
          type="button"
          class="btn btn-danger ml-1"
          (click)="deleteInputImage()"
          [hidden]="showDeleteSpinner"
          [disabled]="showUploadSpinner">
    Foto löschen
  </button>
  <div *ngIf="showDeleteSpinner" class="spinner-border text-danger">
    <span class="sr-only">Foto wird gelöscht ...</span>
  </div>
</form>
<div *ngIf="alertMessage" class="py-4">
  <ngb-alert [dismissible]="false" [type]="'danger'">
    {{alertMessage}}
  </ngb-alert>
</div>
